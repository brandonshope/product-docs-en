[link-scanner-intro]:       intro.md
[link-scanner-settings]:    configure-scanner.md
[link-support]:             mailto:support@wallarm.com
[link-reserved-domains]:    reserved-domains.md

[img-check-scope]:      ../../images/user-guides/scanner/check-scope.png
[img-scope-element]:    ../../images/user-guides/scanner/scope-element.png
[img-disable-association]:      ../../images/user-guides/scanner/disable-association.png

# スコープの操作 <a href="../../../about-wallarm/subscription-plans/#subscription-plans"><img src="../../../images/api-security-tag.svg" style="border: none;"></a>

会社の公開リソースに関する情報は、Wallarmインターフェースの*Scanner*タブで閲覧できます。

![!Scannerタブ][img-check-scope]

Wallarmスキャナーはスコープを検出します。

## スキャナー設定の概要

*Scanner*ブロックには、以下のデータが表示されます。
* 現在のスキャナー設定
* 最後のスキャンの時刻

スキャナーの設定について詳しくは、[「スキャナー設定」][link-scanner-settings]ページをご覧ください。

## スコープの概要

*Scanner*タブの*Scope*ブロックでは、要素が*Domains*、*IPs*、*Services*の3つの列に表示されます。特定のタイプの要素の総数は、列名の近くの小さなグレーのフォントで表示されます。

Wallarmが指定されたIPアドレスがどのデータセンターに属しているかを判断できる場合、要素または要素のグループの右側に対応するタグが表示されます。Amazonの**AWS**タグ、Googleの**GCP**タグ、Microsoftデータセンターの**Azure**タグ、その他のデータセンターの**DC**タグがあります。

!!! info
    デフォルトでは、スコープのスキャンは、Wallarmアカウントの作成時に指定されたメールアドレスのドメインから始まります。

太字で表示される要素名は、監視対象のリソースのグループに対応しています。特定のグループが含むリソースの数は、その名前の近くの小さなグレーのフォントで表示されます。含まれるリソースのリストを展開するには、グループ名をクリックします。

検索フィールドを使用して、要素を名前で検索できます。部分文字列でも検索できます。たとえば、`domain.com`というクエリは、「domain.com」を部分文字列として持つすべてのドメイン（「a.domain.com」、「b.domain.com」など）とその関連を表示します。

バーのボタンのいずれかをクリックして、要素をステータス別にフィルタリングします。
* *すべての資産*：スコープ内のすべてのリソースを表示します。
* *新規*：まだcompanyアカウントのどのユーザーも表示していない新規リソースを表示。。
* *無効*：スキャンが無効なリソースを表示。

## リソースの関連付けを確認する

スコープの要素のうちの1つをクリックします。Wallarmインターフェースは、選択した要素の関連付けを表示します。

![!関連付けのあるスコープ要素][img-scope-element]

リソースのドメイン、IPアドレス、およびポートが相互に依存します。

ドメインは常にIPアドレスよりも優先され、IPアドレスは常にポートよりも優先されます。

優先度の低いリソースのスキャンを無効にするか、リソースを削除すると、優先度の高いリソースはアクティブのままになります。

たとえば、ドメインのスキャンを無効にすると、そのドメインに依存するIPアドレスとポートのスキャンも無効になります。

IPアドレスを削除すると、関連するポートも削除されますが、ドメインはアクティブのままになります。これは、ドメインが複数のIPアドレスを持つことがあるためです。

リソースの接続を無効にして、各リソースを個別に管理できます。


#### リソースの接続を無効および有効にする

リソースの相互接続を無効にして、各リソースのスキャン設定を個別に管理することができます。

リソースの相互接続を無効にするには：
1. 互いに切り離す必要があるリソースペアから1つのリソースを選択します。
2. 現在のリソースにペアのリソースのすぐ隣にあるスイッチをクリックします。

![!リソースの接続を無効にする][img-disable-association]

!!! info "現在のリソースを決定する"
    現在のリソースの名前は太字で表示されます。ウェブインターフェイスでは、発見日も表示されます。

リソースの相互接続を有効にするには、相互接続を無効にするのと同じ手順で行います。

### リソースのスキャンを無効にする

スコープ内の任意のリソースのスキャンを無効にすることができます。これにより、選択したリソースは検出可能なままですが、脆弱性のスキャンは行われません。

1. スコープの要素のうちの1つをクリックします。
2. 選択した要素の隣のスイッチをクリックします。

### スコープからリソースを削除する

スコープからリソースを削除することができます。この操作の目的は、誤って追加されたリソースを削除することです。

1. 名前の隣にあるチェックボックスをクリックして、目的のリソースを選択します。
2. *要素を削除する*をクリック。

!!! warning "削除されたリソースの回復"
    削除されたリソースは、将来のスキャンで見つけることはできません。リソースが誤って削除された場合は、[Wallarmサポートチーム][link-support]に連絡してください。

### ドメインまたはIPアドレスを追加する

ドメインまたはIPアドレスを手動で追加することができます。

*ドメインまたはIPを追加*をクリックします。表示されるウィンドウで、新しいドメインまたはIPを入力し、*追加*をクリックします。

新しいドメインまたはIPアドレスが追加されると、スキャナーはリソースに関連付けられた要素を検索するためのスキャン手順を開始し、それらをスコープに追加します。

!!! warning "予約済みドメイン"
    予約ドメインおよびサブドメインは、特定のクライアントによってのみスコープに追加できます。 Wallarmは、要求に応じてクライアント向けにドメインを予約します。他のクライアントによって予約されたドメインを自分のスコープに追加することはできません。
    
    予約済みドメインに関する詳細情報については、この[リンク][link-reserved-domains]に先に進んでください。

### スキャン速度の制限

ドメインまたはIPアドレスのスキャン速度を制限することができます。スキャナーによって送信されるリクエストの合計速度は、指定された値を超えません。

1. 次のタイプのスコープ要素のいずれかを選択します。*ドメイン*、*IP*。
2. *RPS制限を設定*ボタンまたは現在の制限値をクリックします。
3. ドメインの場合は*ドメインRPS*フィールド、IPアドレスの場合は*IP RPS*フィールドに記入します。
    1. ドメインに依存するIPアドレスごとにRPSを制限することもできます。この制限を設定するには、*IPごとのRPS*フィールドに適切な値を入力してください。
4. *保存*をクリックします。

デフォルトの設定に戻すには、空の値を使用するか、`0`を入力します。

!!! info "関連項目"
    * [スキャナーの概要][link-scanner-intro]
    * [スキャナー設定][link-scanner-settings]

## 公開アセットリストの変更に関する通知

Wallarmは、公開アセットリストの変更に関する通知をお送りすることができます。新しく発見された公開アセット、無効化されたアセット、削除されたアセットに関する通知です。

通知を受け取るためには、メッセンジャーやSOARシステム（PagerDuty、Opsgenie、Slack、Telegramなど）との適切な[ネイティブ統合](../settings/integrations/integrations-intro.md)を設定してください。